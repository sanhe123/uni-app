{"version":3,"sources":["webpack:///E:/self/uni-app/yuedu/pages/editArt/editArt.vue?10f6","webpack:///E:/self/uni-app/yuedu/pages/editArt/editArt.vue?f7b3","webpack:///E:/self/uni-app/yuedu/pages/editArt/editArt.vue?2c17","webpack:///E:/self/uni-app/yuedu/pages/editArt/editArt.vue?780a","webpack:///E:/self/uni-app/yuedu/pages/editArt/editArt.vue"],"names":["artId","loginRes","_self","signModel","require","data","title","artList","inputContent","needUploadImg","uploadIndex","caties","currentCateIndex","catiesFromApi","sedCateIndex","onLoad","option","sign","apiServer","checkLogin","uni","request","url","method","success","res","art","console","log","artContent","art_content","JSON","parse","art_title","status","categories","k","push","art_cate","cateName","i","length","methods","submitNow","showToast","icon","type","content","indexOf","tmpurl","indexID","uploadImg","showLoading","getStorageSync","header","stringify","uid","random","cate","setTimeout","switchTab","uploader","uploadFile","filePath","name","uploadFileRes","index","staticServer","fail","cateChange","e","sedIndex","detail","value","cate_name","cate_id","removeImg","currentTarget","dataset","showModal","confirm","splice","deleteText","submit","artText","addImg","chooseImage","count","sizeType","tempFilePaths"],"mappings":"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","file":"pages/editArt/editArt.js","sourcesContent":["import { render, staticRenderFns } from \"./editArt.vue?vue&type=template&id=7dc1b5f1&\"\nimport script from \"./editArt.vue?vue&type=script&lang=js&\"\nexport * from \"./editArt.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('7dc1b5f1', component.options)\n    } else {\n      api.reload('7dc1b5f1', component.options)\n    }\n    module.hot.accept(\"./editArt.vue?vue&type=template&id=7dc1b5f1&\", function () {\n      api.rerender('7dc1b5f1', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"E:/self/uni-app/yuedu/pages/editArt/editArt.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./editArt.vue?vue&type=template&id=7dc1b5f1&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./editArt.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./editArt.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nvar artId, loginRes, _self;\r\nvar signModel = require('../../common/js/sign.js');\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttitle: '',\r\n\t\t\tartList: [],\r\n\t\t\tinputContent: '',\r\n\t\t\tneedUploadImg: [],\r\n\t\t\tuploadIndex: 0,\r\n\t\t\t//分类\r\n\t\t\tcaties: ['点击选择'],\r\n\t\t\tcurrentCateIndex: 0,\r\n\t\t\tcatiesFromApi: [],\r\n\t\t\t// 记录真实选择的api接口数据的分类id\r\n\t\t\tsedCateIndex: 0\r\n\t\t};\r\n\t},\r\n\tonLoad(option) {\r\n\t\tartId = option.artId;\r\n\t\t_self = this;\r\n\t\tsignModel.sign(this.apiServer);\r\n\t\tloginRes = this.checkLogin('../my/my', '2');\r\n\t\tif (!loginRes) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// 加载文章默认值\r\n\t\tuni.request({\r\n\t\t\turl: this.apiServer + 'art&m=info&artid=' + artId,\r\n\t\t\tmethod: 'GET',\r\n\t\t\tdata: {},\r\n\t\t\tsuccess: res => {\r\n\t\t\t\tvar art = res.data.data;\r\n\t\t\t\tconsole.log(art);\r\n\t\t\t\t// 文章内容转换并展示\r\n\t\t\t\tvar artContent = art.art_content;\r\n\t\t\t\tartContent = JSON.parse(artContent);\r\n\t\t\t\t_self.artList = artContent;\r\n\r\n\t\t\t\t// 默认值赋值\r\n\t\t\t\tthis.title = art.art_title;\r\n\t\t\t\t// 加载文章分类并设置默认值\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: _self.apiServer + 'category&m=index',\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.data.status == 'ok') {\r\n\t\t\t\t\t\t\t// 把数据格式整理为 picker 支持的格式 ['分类名', ...]\r\n\t\t\t\t\t\t\tvar categories = res.data.data;\r\n\r\n\t\t\t\t\t\t\tfor (var k in categories) {\r\n\t\t\t\t\t\t\t\t_self.caties.push(categories[k]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// 记录分类信息\r\n\t\t\t\t\t\t\t_self.catiesFromApi = categories;\r\n\t\t\t\t\t\t\t// 获取当前分类的默认值\r\n\t\t\t\t\t\t\t_self.sedCateIndex = art.art_cate;\r\n\t\t\t\t\t\t\t// 对应的查找picker的默认值\r\n\t\t\t\t\t\t\tvar cateName = categories[art.art_cate];\r\n\t\t\t\t\t\t\tfor (var i = 0; i < _self.caties.length; i++) {\r\n\t\t\t\t\t\t\t\tif (cateName == _self.caties[i]) {\r\n\t\t\t\t\t\t\t\t\t_self.currentCateIndex = i;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\tsubmitNow: function() {\r\n\t\t\t// 数据验证\r\n\t\t\tif (this.title.length < 2) {\r\n\t\t\t\tuni.showToast({ title: '请输入标题', icon: 'none' });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.artList.length < 1) {\r\n\t\t\t\tuni.showToast({ title: '请填写文章内容', icon: 'none' });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.sedCateIndex < 1) {\r\n\t\t\t\tuni.showToast({ title: '请选择分类', icon: 'none' });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// 上传图片 一次一个多次上传 [ 递归函数 ]\r\n\t\t\t// 上传完成后整体提交数据\r\n\t\t\t// 首先整理一下需要上传的图片\r\n\t\t\t// this.needUploadImg = [{tmpurl : 临时地址, index : 数据索引}]\r\n\t\t\tthis.needUploadImg = [];\r\n\t\t\tfor (var i = 0; i < this.artList.length; i++) {\r\n\t\t\t\tif (this.artList[i].type == 'image') {\r\n\t\t\t\t\tif (this.artList[i].content.indexOf('192.168.1.') == -1) {\r\n\t\t\t\t\t\tthis.needUploadImg.push({ tmpurl: this.artList[i].content, indexID: i });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.uploadImg();\r\n\t\t},\r\n\t\tuploadImg: function() {\r\n\t\t\t// 如果没有图片 或者已经上传完成 则执行提交\r\n\t\t\tif (this.needUploadImg.length < 1 || this.uploadIndex >= this.needUploadImg.length) {\r\n\t\t\t\tuni.showLoading({ title: '正在提交' });\r\n\t\t\t\t// 将信息整合后提交到服务器\r\n\t\t\t\tvar sign = uni.getStorageSync('sign');\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.apiServer + 'art&m=edit&artid=' + artId,\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\theader: { 'content-type': 'application/x-www-form-urlencoded' },\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\ttitle: _self.title,\r\n\t\t\t\t\t\tcontent: JSON.stringify(_self.artList),\r\n\t\t\t\t\t\tuid: loginRes[0],\r\n\t\t\t\t\t\trandom: loginRes[1],\r\n\t\t\t\t\t\tcate: _self.sedCateIndex,\r\n\t\t\t\t\t\tsign: sign\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.data.status == 'ok') {\r\n\t\t\t\t\t\t\tuni.showToast({ title: '提交成功', icon: 'none' });\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\turl: '../my/my'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({ title: res.data.data, icon: 'none' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// 上传图片\r\n\t\t\tuni.showLoading({ title: '上传图片' });\r\n\t\t\tvar uploader = uni.uploadFile({\r\n\t\t\t\turl: _self.apiServer + 'uploadImg&m=index',\r\n\t\t\t\tfilePath: _self.needUploadImg[_self.uploadIndex].tmpurl,\r\n\t\t\t\tname: 'file',\r\n\t\t\t\tsuccess: uploadFileRes => {\r\n\t\t\t\t\tuploadFileRes = JSON.parse(uploadFileRes.data);\r\n\t\t\t\t\tif (uploadFileRes.status != 'ok') {\r\n\t\t\t\t\t\tconsole.log(uploadFileRes);\r\n\t\t\t\t\t\tuni.showToast({ title: '上传图片失败,请重试!', icon: 'none' });\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 将已经上传的文件地址赋值给文章数据\r\n\t\t\t\t\tvar index = _self.needUploadImg[_self.uploadIndex].indexID;\r\n\t\t\t\t\t_self.artList[index].content = _self.staticServer + uploadFileRes.data;\r\n\t\t\t\t\tconsole.log(_self.artList);\r\n\t\t\t\t\t_self.uploadIndex++;\r\n\t\t\t\t\t// 递归上传\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t_self.uploadImg();\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t},\r\n\t\t\t\tfail: () => {\r\n\t\t\t\t\tuni.showToast({ title: '上传图片失败,请重试!', icon: 'none' });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcateChange: function(e) {\r\n\t\t\tvar sedIndex = e.detail.value;\r\n\t\t\tthis.currentCateIndex = sedIndex;\r\n\t\t\t// 获取选择的分类名称\r\n\t\t\tif (sedIndex < 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar cateName = this.caties[sedIndex];\r\n\t\t\tfor (var i = 0; i < this.catiesFromApi.length; i++) {\r\n\t\t\t\tif (cateName == this.catiesFromApi[i].cate_name) {\r\n\t\t\t\t\tthis.sedCateIndex = this.catiesFromApi[i].cate_id;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.currentCateIndex = sedIndex;\r\n\t\t\tconsole.log(this.sedCateIndex);\r\n\t\t},\r\n\t\tremoveImg: function(e) {\r\n\t\t\tconsole.log(e);\r\n\t\t\tvar index = e.currentTarget.dataset.index;\r\n\t\t\tuni.showModal({\r\n\t\t\t\tcontent: '确定要删除此图片吗',\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tsuccess(e) {\r\n\t\t\t\t\tif (e.confirm) {\r\n\t\t\t\t\t\t_self.artList.splice(index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tdeleteText: function(e) {\r\n\t\t\tvar index = e.currentTarget.dataset.index;\r\n\t\t\tuni.showModal({\r\n\t\t\t\tcontent: '确定要删除吗',\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tsuccess(e) {\r\n\t\t\t\t\tif (e.confirm) {\r\n\t\t\t\t\t\t_self.artList.splice(index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tsubmit: function(res) {\r\n\t\t\tvar content = res.detail.value.artText;\r\n\t\t\tif (content.length < 1) {\r\n\t\t\t\tuni.showToast({ title: '请输入内容', icon: 'none' });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.artList.push({ type: 'text', content: content });\r\n\t\t\tthis.inputContent = '';\r\n\t\t},\r\n\t\taddImg: function() {\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tcount: 1,\r\n\t\t\t\tsizeType: ['compressed'],\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t_self.artList.push({ type: 'image', content: res.tempFilePaths[0] });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n"],"sourceRoot":""}